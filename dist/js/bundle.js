!function(e){var t={};function a(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(e,t){e.exports=$},function(e,t,a){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),n=r(a(0));n.default(document).ready(function(){n.default("#btnFriends").click(i.fbf.getFriends),n.default("#fmGetFriends").submit(i.fbf.loadFriends),n.default("#relationType").change(i.fbf.onChangeRelationType),n.default.ajax({type:"get",url:"test_data/fbf.txt",data:"rev=0",dataType:"text",success:function(e){return n.default("#ta").val(e)}})})},function(e,t,a){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(a(0)),n=r(a(3)),f=function(){function e(){}return e.setDataTypeValues=function(t,a){return e.nSMID=t,e.nRelationType=a,i.default("#smID,#fake_smID").val(e.nSMID.toString()),i.default("#relationType,#fake_relationType").val(e.nRelationType.toString()),0},e.prototype.changeRelationType=function(t){e.setDataTypeValues(e.nSMID,t),this.getFriends(!1)},e.defineDataType=function(t){return/id="friends_user_row\d+"/i.test(t)?e.setDataTypeValues(2,0):/i\.mycdn\.me/i.test(t)?/friendSubscribers/i.test(t)?e.setDataTypeValues(3,2):e.setDataTypeValues(3,1):/friend_list_item/i.test(t)?e.setDataTypeValues(1,1):/fbProfileBrowserListItem/i.test(t)?e.setDataTypeValues(1,2):e.setDataTypeValues(0,0)},e.prototype.getFriends=function(a){void 0===a&&(a=!0);var r=i.default("#ta").val();a&&e.defineDataType(r),t.fbf.fillFriendTable(r)},e.prototype.fillFriendTable=function(t){var a=[],r=i.default(t);if(e.arFriends=[],0!==e.nRelationType){if(1===e.nRelationType)switch(e.nSMID){case 1:i.default('li>[data-testid="friend_list_item"]',r).each(function(){var e=i.default("a[data-hovercard]",this).eq(0).data("hovercard").match(/hovercard\/user.php\?id=(\d+)/);if(e&&e[1]){var t=e[1],r=i.default('img[role="img"]',this).attr("aria-label"),f=i.default('img[role="img"]',this).attr("src");a.push({fbID:t,title:r,face:n.default.unescape(f)})}});break;case 2:i.default(".friends_user_row",r).each(function(){var e=i.default(this).attr("id").match(/friends_user_row(\d+)/);if(e&&e[1]){var t=e[1],r=i.default(".friends_field_title a",this).html().replace(/<br>/gi," "),f=i.default("img.friends_photo_img",this).attr("src");a.push({fbID:t,title:r,face:n.default.unescape(f)})}});break;case 3:i.default(".ugrid_i",r).each(function(){var e=i.default(".entity-item",this).data("entity-id"),t=i.default(".ucard-w_t a",this).html().replace(/<br>/gi," "),r="https:"+i.default("img.photo_img",this).attr("src");a.push({fbID:e,title:t,face:n.default.unescape(r)})})}else switch(e.nSMID){case 1:i.default("li.fbProfileBrowserListItem",r).each(function(){var e=i.default("a[data-hovercard]",this).eq(0).data("hovercard").match(/hovercard\/user.php\?id=(\d+)/);if(e&&e[1]){var t=e[1],r=i.default('img[role="img"]',this).attr("aria-label"),f=i.default('img[role="img"]',this).attr("src");a.push({fbID:t,title:r,face:n.default.unescape(f)})}});break;case 2:i.default(".friends_user_row",r).each(function(){var e=i.default(this).attr("id").match(/friends_user_row(\d+)/);if(e&&e[1]){var t=e[1],r=i.default(".friends_field_title a",this).html().replace(/<br>/gi," "),f=i.default("img.friends_photo_img",this).attr("src");a.push({fbID:t,title:r,face:n.default.unescape(f)})}});break;case 3:i.default(".ugrid_i",r).each(function(){var e=i.default(".__l",this).data("id"),t=i.default(".caption .ellip a",this).html().replace(/<br>/gi," "),r="https:"+i.default("img.photo_img",this).attr("src");a.push({fbID:e,title:t,face:n.default.unescape(r)})})}e.arFriends=a.map(function(t){return t.smID=e.nSMID,t.relationType=e.nRelationType,t})}e.drawUsers(),i.default("input[name=withfaces]","#fmGetFriends").prop("checked",e.arFriends.length<=e.WITH_FACES_MAX_COUNT)},e.drawUsers=function(){var t=i.default("#divFriends").empty();if(0===e.nSMID||0===e.nRelationType)return i.default("#relationType").focus().closest(".form-group").addClass("has-error"),void alert("Не можливо визначити тип відношень для даної соціальної мережі. Оберіть, будь ласка, тип відношень");i.default("span","#btnFriends").text("("+e.arFriends.length+")");var a=n.default.template(i.default("#tmplUserAccount").html()),r=e.nSMID;e.arFriends.forEach(function(n){var f=a({id:n.fbID,title:n.title,link:e.arSM[r].site+e.arSM[r].idPrefix+n.fbID,img:1===e.nSMID?n.face:"img/man.jpg",icon:1===e.nRelationType?"handshake-o":"rss"});i.default(f).appendTo(t)})},e.prototype.loadFriends=function(){if(0===e.arFriends.length)return alert("Список друзів пустий. Можливо, Ви забули натиснути на кнопку показу друзів."),!1;if(""===i.default.trim(i.default("#filename").val()))return alert("Введіть, будь ласка, назву вихідного файлу"),i.default("#filename").focus(),!1;var t=encodeURIComponent(JSON.stringify(e.arFriends));return e.WITH_FACES_MAX_COUNT<e.arFriends.length&&i.default("input[name=withfaces]","#fmGetFriends").prop("checked",!1),i.default("input[name=data]","#fmGetFriends").val(t),setTimeout(function(){i.default("#ta,#filename").val(""),i.default("#divFriends").empty(),i.default("span","#btnFriends").text(""),e.setDataTypeValues(0,0),e.arFriends=[]},1e3),!0},e.prototype.onChangeRelationType=function(){2==e.nSMID?(i.default(this).closest(".form-group").removeClass("has-error"),t.fbf.changeRelationType(parseInt(i.default(this).val()))):(i.default(this).val(e.nRelationType.toString()),alert("Не можливо змінити тип відношень для даної соціальної мережі!"))},e.WITH_FACES_MAX_COUNT=200,e.arFriends=[],e.arSM={1:{site:"https://www.facebook.com/",idPrefix:""},2:{site:"https://vk.com/",idPrefix:"id"},3:{site:"https://ok.ru/",idPrefix:"profile/"}},e.nSMID=0,e.nRelationType=0,e}();t.Fbf=f,t.fbf=new f},function(e,t){e.exports=_}]);