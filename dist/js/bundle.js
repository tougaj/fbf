!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1);$(document).ready(function(){$("#btnFriends").click(i.fbf.getFriends),$("#fmGetFriends").submit(i.fbf.loadFriends),$("#relationType").change(i.fbf.onChangeRelationType)})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.setDataTypeValues=function(t,r){return e.nSMID=t,e.nRelationType=r,$("#smID,#fake_smID").val(e.nSMID.toString()),$("#relationType,#fake_relationType").val(e.nRelationType.toString()),0},e.prototype.changeRelationType=function(t){e.setDataTypeValues(e.nSMID,t),this.getFriends(!1)},e.defineDataType=function(t){return/id="friends_user_row\d+"/i.test(t)?e.setDataTypeValues(2,0):/i\.mycdn\.me/i.test(t)?/friendSubscribers/i.test(t)?e.setDataTypeValues(3,2):e.setDataTypeValues(3,1):/friend_list_item/i.test(t)?e.setDataTypeValues(1,1):/fbProfileBrowserListItem/i.test(t)?e.setDataTypeValues(1,2):e.setDataTypeValues(0,0)},e.prototype.getFriends=function(r){void 0===r&&(r=!0);var i=$("#ta").val();r&&e.defineDataType(i),t.fbf.fillFriendTable(i)},e.prototype.fillFriendTable=function(t){var r=[],i=$(t);if(e.arFriends=[],0!==e.nRelationType){if(1===e.nRelationType)switch(e.nSMID){case 1:$('li>[data-testid="friend_list_item"]',i).each(function(){var e=$("a[data-hovercard]",this).eq(0).data("hovercard").match(/hovercard\/user.php\?id=(\d+)/);if(e&&e[1]){var t=e[1],i=$('img[role="img"]',this).attr("aria-label"),a=$('img[role="img"]',this).attr("src");r.push({fbID:t,title:i,face:_.unescape(a)})}});break;case 2:$(".friends_user_row",i).each(function(){var e=$(this).attr("id").match(/friends_user_row(\d+)/);if(e&&e[1]){var t=e[1],i=$(".friends_field_title a",this).html().replace(/<br>/gi," "),a=$("img.friends_photo_img",this).attr("src");r.push({fbID:t,title:i,face:_.unescape(a)})}});break;case 3:$(".ugrid_i",i).each(function(){var e=$(".entity-item",this).data("entity-id"),t=$(".ucard-w_t a",this).html().replace(/<br>/gi," "),i="https:"+$("img.photo_img",this).attr("src");r.push({fbID:e,title:t,face:_.unescape(i)})})}else switch(e.nSMID){case 1:$("li.fbProfileBrowserListItem",i).each(function(){var e=$("a[data-hovercard]",this).eq(0).data("hovercard").match(/hovercard\/user.php\?id=(\d+)/);if(e&&e[1]){var t=e[1],i=$('img[role="img"]',this).attr("aria-label"),a=$('img[role="img"]',this).attr("src");r.push({fbID:t,title:i,face:_.unescape(a)})}});break;case 2:$(".friends_user_row",i).each(function(){var e=$(this).attr("id").match(/friends_user_row(\d+)/);if(e&&e[1]){var t=e[1],i=$(".friends_field_title a",this).html().replace(/<br>/gi," "),a=$("img.friends_photo_img",this).attr("src");r.push({fbID:t,title:i,face:_.unescape(a)})}});break;case 3:$(".ugrid_i",i).each(function(){var e=$(".__l",this).data("id"),t=$(".caption .ellip a",this).html().replace(/<br>/gi," "),i="https:"+$("img.photo_img",this).attr("src");r.push({fbID:e,title:t,face:_.unescape(i)})})}e.arFriends=r.map(function(t){return t.smID=e.nSMID,t.relationType=e.nRelationType,t})}e.drawUsers(),$("input[name=withfaces]","#fmGetFriends").prop("checked",e.arFriends.length<=e.WITH_FACES_MAX_COUNT)},e.drawUsers=function(){var t=$("#divFriends").empty();if(0===e.nSMID||0===e.nRelationType)return $("#relationType").focus().closest(".form-group").addClass("has-error"),void alert("Не можливо визначити тип відношень для даної соціальної мережі. Оберіть, будь ласка, тип відношень");$("span","#btnFriends").text("("+e.arFriends.length+")");var r=_.template($("#tmplUserAccount").html()),i=e.nSMID;e.arFriends.forEach(function(a){var n=r({id:a.fbID,title:a.title,link:e.arSM[i].site+e.arSM[i].idPrefix+a.fbID,img:1===e.nSMID?a.face:"img/man.jpg",icon:1===e.nRelationType?"handshake-o":"rss"});$(n).appendTo(t)})},e.prototype.loadFriends=function(){if(0===e.arFriends.length)return alert("Список друзів пустий. Можливо, Ви забули натиснути на кнопку показу друзів."),!1;if(""===$.trim($("#filename").val()))return alert("Введіть, будь ласка, назву вихідного файлу"),$("#filename").focus(),!1;var t=encodeURIComponent(JSON.stringify(e.arFriends));return e.WITH_FACES_MAX_COUNT<e.arFriends.length&&$("input[name=withfaces]","#fmGetFriends").prop("checked",!1),$("input[name=data]","#fmGetFriends").val(t),setTimeout(function(){$("#ta,#filename").val(""),$("#divFriends").empty(),$("span","#btnFriends").text(""),e.setDataTypeValues(0,0),e.arFriends=[]},1e3),!0},e.prototype.onChangeRelationType=function(){2==e.nSMID?($(this).closest(".form-group").removeClass("has-error"),t.fbf.changeRelationType(parseInt($(this).val()))):($(this).val(e.nRelationType.toString()),alert("Не можливо змінити тип відношень для даної соціальної мережі!"))},e.WITH_FACES_MAX_COUNT=200,e.arFriends=[],e.arSM={1:{site:"https://www.facebook.com/",idPrefix:""},2:{site:"https://vk.com/",idPrefix:"id"},3:{site:"https://ok.ru/",idPrefix:"profile/"}},e.nSMID=0,e.nRelationType=0,e}();t.Fbf=i,t.fbf=new i}]);